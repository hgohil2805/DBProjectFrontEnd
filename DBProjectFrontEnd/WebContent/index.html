<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Login</title>
  <script type="text/javascript">

	function validateUser() {
		var user = document.getElementById('username').value;
		var pass = document.getElementById('password').value;
	    var jsonString = '{"username": ' + user + ', "password": ' + pass +"}";
		if (user.length > 0 && pass.length > 0) {
			if (window.XMLHttpRequest) {
				xmlhttp = new XMLHttpRequest();
			} else {
				xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.onreadystatechange = function() {
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
					var json = JSON.parse(xmlhttp.responseText);
					if(json.status == "success"){
						window.location = "index.html";
					} else if (json.status == "failure"){
						alert("Failed to Login");
					}
				}
			};
			xmlhttp.open("POST", "LoginServlet", true);
			xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			xmlhttp.send("json="+jsonString);
		} else {
			alert("Missing Username or Password");	
		}
	}

	function signUp(){
		window.location = "sign_up.html";
	}
	
</script>
<link rel="stylesheet" href="css/styles.css">
<link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
</head>
<body>
    <div class="wrapper">
      <h1>Login to Web Application</h1>
  </p>
        <input id="username" type="text" name="login" value="" placeholder="Username">
        <input id="password" type="password" name="password" value="" placeholder="Password">
        <input onclick="signUp()" type="button" name="signup" value="Sign Up">
        <input onclick="validateUser()" type="submit" name="commit" value="Login">
    </div>
</body>
</html>
