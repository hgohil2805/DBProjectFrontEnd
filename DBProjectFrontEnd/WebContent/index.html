<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Login</title>
  <script type="text/javascript">

	function validateUser() {
		var user = document.getElementById('username').value;
		var pass = document.getElementById('password').value;
	    var jsonString = '{"username": ' + user + ', "password": ' + pass +"}";
		if (user.length > 0 && pass.length > 0) {
			if (window.XMLHttpRequest) {
				xmlhttp = new XMLHttpRequest();
			} else {
				xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.onreadystatechange = function() {
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
					var json = JSON.parse(xmlhttp.responseText);
					if(json.status == "success"){
						document.getElementById('label').innerHTML = "Login successful";
					} else if (json.status == "failure"){
						document.getElementById('label').innerHTML = "Invalid Username or Password";
					}
				}
			};
			xmlhttp.open("POST", "LoginServlet", true);
			xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			xmlhttp.send("json="+jsonString);
		} else {
			document.getElementById('label').innerHTML = "Missing Username or Password";	
		}
	}
</script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <section class="container">
    <div class="login">
      <h1>Login to Web Application</h1>
        <p><input id="username" type="text" name="login" value="" placeholder="Username"></p>
        <p><input id="password" type="password" name="password" value="" placeholder="Password"></p>
        <p class="submit"><input onclick="validateUser()" type="submit" name="commit" value="Login"></p>
    </div>
  </section>
</body>
</html>
